jQuery(document).ready(function(a){var e=null;jQuery("#tt_pro_search_input").on("input",function(s){s.stopPropagation();var r=a(this).val(),t=a(this).next().find("select").val();r.length>=a(this).data("min-chars")?e=jQuery.ajax({url:screenReaderText.ajaxurl,type:"post",data:{action:"megashop_tt_ajax_pro_search",keyword:r,category:t},beforeSend:function(){null!=e&&e.abort(),a("body").hasClass("rtl")?a("#tt_pro_search_input").css({"background-image":"url("+ajax_search_loader+")","background-repeat":"no-repeat","background-position":"15px center"}):a("#tt_pro_search_input").css({"background-image":"url("+ajax_search_loader+")","background-repeat":"no-repeat","background-position":"right 10px center"}),a(".tt_ajax_search_results").hide()},success:function(e){var s=jQuery.parseJSON(e),t="";a.each(s.search_results,function(a,e){var s=e.value.replace(new RegExp(r,"gi"),"<strong>"+r+"</strong>");t+=0==e.id?'<div class="ajax_search_result" data-pname="'+e.value+'" data-index="'+a+'"><a id="pro-'+e.id+'" href="'+e.url+'">'+s+"</a></div>":'<div class="ajax_search_result" data-pname="'+e.value+'" data-index="'+a+'"><a id="pro-'+e.id+'" href="'+e.url+'"><img src="'+e.image+'" alt="'+s+'"><div class="pro_title">'+s+"</div></a></div>"}),a("#tt_pro_search_input").css({"background-image":"","background-repeat":"no-repeat","background-position":"right center"}),a(".tt_ajax_search_results").html(t).show(),a(".ajax_search_result").mouseenter(function(){a(".tt_ajax_search_results .ajax_search_result").hasClass("ac_over")?(a(".tt_ajax_search_results .ajax_search_result").removeClass("ac_over"),a(this).addClass("ac_over")):a(this).addClass("ac_over")})}}):a(".tt_ajax_search_results").hide()})}),jQuery(document).ready(function(a){a("#tt_pro_search_input").on("keydown",function(e){var s,r=a(".ajax_search_result"),t=e.keyCode,_=r.filter(".result_selected");if(40==t||38==t){r.removeClass("result_selected"),40==t?s=!_.length||_.is(":last-child")?r.eq(0):_.next():38==t&&(s=!_.length||_.is(":first-child")?r.last():_.prev());var c=s.data("pname").replace(/â†’/g,"&rarr;");a("#tt_pro_search_input").val(c),s.addClass("result_selected"),a(".ajax_search_result").mouseenter(function(){a(".tt_ajax_search_results .ajax_search_result").hasClass("ac_over")?(a(".tt_ajax_search_results .ajax_search_result").removeClass("ac_over"),a(this).addClass("ac_over")):a(this).addClass("ac_over")})}}),jQuery("body").bind("click",function(e){a(".tt_ajax_search_results").hide()}),jQuery("#tt_pro_search_input").bind("click",function(e){e.stopPropagation();var s=a(this).val();s.length<=a(this).data("min-chars")?a(".tt_ajax_search_results").hide():(a(".tt_ajax_search_results").show(),a(".ajax_search_result").mouseenter(function(){a(".tt_ajax_search_results .ajax_search_result").hasClass("ac_over")?(a(".tt_ajax_search_results .ajax_search_result").removeClass("ac_over"),a(this).addClass("ac_over")):a(this).addClass("ac_over")})),a(".tt_ajax_search_results .search_result").html("")})});